# JIRA PMS Dashboard - 설치 및 사용 가이드

## 1. 사전 요구사항

- **Chrome 브라우저** (Manifest V3 지원, 버전 110 이상 권장)
- **구축형 JIRA Server/Data Center** 8.14 이상 (PAT 지원 필수)
- JIRA에서 발급한 **Personal Access Token (PAT)**

> Node.js, npm 등 개발 환경은 **필요하지 않습니다.** 배포된 zip 파일로 바로 설치할 수 있습니다.

---

## 2. PAT 발급 방법

1. JIRA에 로그인합니다.
2. 우측 상단 프로필 아이콘 > **프로필** 클릭
3. **Personal Access Tokens** 메뉴로 이동
4. **토큰 만들기** 클릭 > 토큰 이름 입력 > **만들기**
5. 생성된 토큰을 안전한 곳에 복사합니다. (이 토큰은 다시 확인할 수 없습니다)

---

## 3. 설치 방법

### 3.1 zip 파일로 설치 (권장)

배포된 `jira-pms-dashboard-v1.0.0.zip` 파일을 받은 경우:

1. zip 파일의 압축을 해제합니다. (폴더가 생성됩니다)
2. Chrome 주소창에 `chrome://extensions` 입력
3. 우측 상단 **개발자 모드** 토글을 활성화합니다.
4. **압축해제된 확장 프로그램을 로드합니다** 버튼 클릭
5. 압축 해제한 폴더를 선택합니다.
6. "JIRA PMS Dashboard" 확장프로그램이 설치됩니다.

### 3.2 소스에서 직접 빌드하여 설치 (개발자용)

소스 코드를 직접 빌드하려는 경우 Node.js 18 이상이 필요합니다.

```bash
# 프로젝트 디렉토리로 이동
cd jira-manage

# 의존성 설치
npm install

# 빌드 + zip 패키징
npm run package
```

빌드 완료 후 프로젝트 루트에 `jira-pms-dashboard-v1.0.0.zip` 파일이 생성됩니다.
이 파일을 다른 사용자에게 전달하거나, `dist/` 폴더를 직접 Chrome에 로드할 수 있습니다.

---

## 4. 초기 설정

### 4.1 JIRA 연결 설정

1. Chrome 확장프로그램 목록에서 "JIRA PMS Dashboard"의 **세부정보** 클릭
2. **확장 프로그램 옵션** 클릭 (또는 확장프로그램 아이콘 우클릭 > 옵션)
3. 다음 정보를 입력합니다:
   - **JIRA URL**: `https://jira.example.com` (구축형 JIRA 서버 주소)
   - **Personal Access Token (PAT)**: 발급받은 토큰
   - **자동 동기화 주기**: 5분 / 15분 / 30분 / 1시간 중 선택
4. **저장** 클릭
   - 최초 저장 시 JIRA 도메인에 대한 호스트 권한 요청 팝업이 표시됩니다. **허용**을 클릭하세요.
5. **연결 테스트** 버튼으로 정상 연결 확인

### 4.2 팀 구성 (구성원 관리 탭)

JIRA에는 조직도/팀 데이터가 없으므로, 확장프로그램 내에서 직접 구성합니다.

1. 새 탭을 열면 대시보드가 표시됩니다.
2. 상단의 **구성원 관리** 탭을 클릭합니다.

#### 팀 생성
1. "팀 관리" 섹션에서 팀 이름을 입력하고 **추가** 클릭
2. 필요한 만큼 팀을 생성합니다 (예: "프론트엔드", "백엔드", "QA")

#### 구성원 등록
1. "구성원 관리" 섹션에서 **구성원 추가** 클릭
2. 이메일, 닉네임을 입력하고 소속 팀을 선택
3. **추가** 클릭

### 4.3 JIRA 동기화 및 매핑

1. 대시보드 상단의 **지금 동기화** 버튼을 클릭합니다.
2. JIRA의 Epic과 하위 Issue가 로컬 DB에 동기화됩니다.
3. **구성원 관리** 탭으로 이동하면 "매핑 대기열"에 미매핑 JIRA 작업자가 표시됩니다.

#### 매핑 방법

**방법 1: 기존 구성원에 연결**
- 매핑 대기열의 드롭다운에서 기존 구성원을 선택하면 JIRA 계정과 자동 연결됩니다.

**방법 2: 신규 등록**
- **신규 등록** 버튼 클릭 > 닉네임과 소속 팀을 지정하여 구성원으로 바로 등록합니다.

**자동 매핑**
- JIRA 작업자의 이메일과 구성원의 이메일이 일치하면 동기화 시 자동으로 연결됩니다.

---

## 5. 대시보드 사용법

새 탭을 열면 대시보드가 표시됩니다. 두 개의 탭으로 구성됩니다:

### 5.1 대시보드 탭

- **요약 카드**: 전체 프로젝트 수, 이슈 수, 평균 OTDR, 평균 AOD
- **팀별 효율성**: 팀별 OTDR/AOD 비교 바 차트 (팀이 있을 때만 표시)
- **프로젝트 진행률**: Epic별 To Do / 진행중 / 완료 이슈 스택 바 차트
  - 상단 드롭다운으로 특정 프로젝트만 필터링 가능
- **구성원 효율성 랭킹**: OTDR 기준 내림차순 랭킹 테이블
  - 닉네임, 팀, 할당 수, 완료 수, OTDR(%), AOD(일)

### 5.2 구성원 관리 탭

- **매핑 대기열**: 아직 구성원으로 연결되지 않은 JIRA 작업자 목록
- **팀 관리**: 팀 추가/수정/삭제
- **구성원 관리**: 구성원 추가/수정/삭제, JIRA 연결 상태 확인

---

## 6. 주요 지표 설명

| 지표 | 설명 |
|------|------|
| **OTDR** (On-Time Delivery Rate) | 마감일 준수율. `dueDate`가 있는 완료 이슈 중 마감일 이내에 해결된 비율. 0%~100% |
| **AOD** (Average Overdue Days) | 평균 지연 일수. 마감일을 초과한 이슈들의 평균 지연 일수. 0일 이상 |
| **진행률** | 프로젝트(Epic) 내 전체 이슈 대비 완료 이슈 비율 |

### 날짜 계산 기준
- 모든 날짜는 **KST (Asia/Seoul)** 기준
- 마감일 `dueDate`는 해당일 **23:59:59 KST**로 처리
- 마감일이 없는 이슈는 OTDR/AOD 계산에서 제외

---

## 7. 데이터 및 보안

모든 데이터는 브라우저 내부 **IndexedDB**에 저장됩니다. 외부 서버로 전송되지 않습니다.

| 테이블 | 설명 |
|--------|------|
| `projects` | JIRA Epic 정보 |
| `units` | JIRA Issue (Epic 하위) 정보 |
| `workers` | JIRA Assignee 원본 정보 |
| `teams` | 관리자가 정의한 팀 |
| `members` | 관리자가 정의한 구성원 (JIRA 계정 매핑 포함) |

- PAT는 `chrome.storage.local`에 저장되며, 해당 확장프로그램만 접근 가능합니다.
- JIRA API 호출 외에 어떠한 외부 통신도 하지 않습니다.

---

## 8. 문제 해결

### "연결 테스트 실패"
- JIRA URL이 `https://`로 시작하는지 확인
- PAT가 만료되지 않았는지 확인
- JIRA 서버가 외부 접근을 허용하는지 확인 (방화벽/VPN)

### "동기화 시 이슈가 0개"
- JIRA에 Epic 이슈 타입이 존재하는지 확인
- PAT 계정에 해당 프로젝트의 읽기 권한이 있는지 확인
- Epic Link 커스텀 필드가 올바르게 감지되었는지 확인 (확장프로그램은 자동 감지 시도)

### "새 탭이 대시보드로 바뀌지 않음"
- `chrome://extensions`에서 확장프로그램이 활성화되어 있는지 확인
- 다른 새 탭 오버라이드 확장프로그램과 충돌할 수 있음 — 비활성화 후 재시도

### 데이터 초기화
- Chrome DevTools > Application > IndexedDB > JiraPmsDB 에서 직접 데이터 삭제 가능
- 확장프로그램을 삭제하면 모든 로컬 데이터가 삭제됩니다

---

## 9. 업데이트 방법

새 버전의 zip 파일을 받은 경우:

1. 기존 확장프로그램의 폴더를 새 zip의 내용으로 덮어씁니다.
2. `chrome://extensions`에서 "JIRA PMS Dashboard"의 **새로고침** 버튼(↻)을 클릭합니다.
3. 기존 설정(PAT, 팀, 구성원)과 동기화 데이터는 모두 유지됩니다.

---

## 10. 기술 스택

| 기술 | 용도 |
|------|------|
| React 19 + TypeScript | UI 프레임워크 |
| Vite + CRXJS | Chrome Extension 빌드 |
| Dexie.js (IndexedDB) | 로컬 데이터베이스 |
| dayjs (timezone) | KST 날짜 변환 |
| Recharts | 차트 시각화 |
| Tailwind CSS | 스타일링 |
